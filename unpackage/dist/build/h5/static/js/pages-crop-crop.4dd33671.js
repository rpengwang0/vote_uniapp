(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crop-crop"],{"0491":function(n,r,t){var e=t("1c70");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("4f06").default;a("ab1ba132",e,!0,{sourceMap:!1,shadowMode:!1})},"1c70":function(n,r,t){var e=t("24fb");r=e(!1),r.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/uni-cropper/index.wxss */.container[data-v-c857dae4]{background-color:#000;position:fixed;top:0;left:0;right:0;bottom:50px;display:block;align-items:center;flex-direction:column;height:100vh}.cropper-config[data-v-c857dae4]{position:fixed;z-index:999;bottom:10px;left:0;right:0;width:90%;margin:0 auto\r\n\t/* padding: 20upx 40upx; */}.button-box[data-v-c857dae4]{display:flex;flex-direction:row;justify-content:space-between;width:100%}.button-box uni-button[data-v-c857dae4], .button-box uni-view[data-v-c857dae4]{width:25%;line-height:35px;height:35px;background-color:#000;color:#fff;text-align:center;font-size:%?36?%}.cropper-content[data-v-c857dae4]{width:100%;min-height:%?750?%}.uni-corpper[data-v-c857dae4]{position:relative;overflow:hidden;box-sizing:border-box;margin:0 auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}.uni-corpper-content[data-v-c857dae4]{position:relative}.uni-corpper-content uni-image[data-v-c857dae4]{display:block;width:100%;min-width:0!important;max-width:none!important;\r\n\t/* height: 100%; */min-height:0!important;\r\n\t/* max-height: none !important; */max-height:calc(100vh - %?100?%);margin:0 auto;image-orientation:0deg!important}\r\n/* 移动图片效果 */.uni-cropper-drag-box[data-v-c857dae4]{position:absolute;z-index:1;top:0;right:0;bottom:0;left:0;cursor:move;background:rgba(0,0,0,.479)}\r\n/* 内部的信息 */.uni-corpper-crop-box[data-v-c857dae4]{position:absolute;z-index:2;max-height:calc(100vh - %?100?%);background:rgba(56,50,50,.479)}.uni-corpper-crop-box .uni-cropper-view-box[data-v-c857dae4]{position:relative;display:block;overflow:visible;width:100%;height:100%;max-height:calc(100vh - %?100?%);outline:%?5?% solid #646161;outline-color:rgba(255,255 255,1)}\r\n/* 横向虚线 */.uni-cropper-dashed-h[data-v-c857dae4]{position:absolute;top:33.33333333%;left:0;width:100%;height:33.33333333%;border-top:%?1?% dashed hsla(0,0%,100%,.5);border-bottom:%?1?% dashed hsla(0,0%,100%,.5)}\r\n/* 纵向虚线 */.uni-cropper-dashed-v[data-v-c857dae4]{position:absolute;top:0;left:33.33333333%;width:33.33333333%;height:100%;border-right:%?1?% dashed hsla(0,0%,100%,.5);border-left:%?1?% dashed hsla(0,0%,100%,.5)}\r\n/* 四个方向的线  为了之后的拖动事件*/.uni-cropper-line-t[data-v-c857dae4]{position:absolute;top:0;left:0;display:block;width:100%;height:%?3?%;cursor:n-resize;opacity:.1;background-color:#fff}.uni-cropper-line-t[data-v-c857dae4]::before{position:absolute;z-index:11;top:50%;right:%?0?%;bottom:0;width:100%;height:%?41?%;content:"";-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background:transparent}.uni-cropper-line-r[data-v-c857dae4]{position:absolute;top:0;right:%?0?%;display:block;width:%?3?%;height:100%;cursor:e-resize;opacity:.1;background-color:#fff}.uni-cropper-line-r[data-v-c857dae4]::before{position:absolute;z-index:11;top:0;bottom:0;left:50%;width:%?41?%;height:100%;content:"";-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);background:transparent}.uni-cropper-line-b[data-v-c857dae4]{position:absolute;bottom:0;left:0;display:block;width:100%;height:%?3?%;cursor:s-resize;opacity:.1;background-color:#fff}.uni-cropper-line-b[data-v-c857dae4]::before{position:absolute;z-index:11;top:50%;right:%?0?%;bottom:0;width:100%;height:%?41?%;content:"";-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background:transparent}.uni-cropper-line-l[data-v-c857dae4]{position:absolute;top:0;left:0;display:block;width:%?3?%;height:100%;cursor:w-resize;opacity:.1;background-color:#fff}.uni-cropper-line-l[data-v-c857dae4]::before{position:absolute;z-index:11;top:0;bottom:0;left:50%;width:%?41?%;height:100%;content:"";-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);background:transparent}.uni-cropper-point[data-v-c857dae4]{position:absolute;z-index:3;width:%?5?%;height:%?5?%;opacity:.75;background-color:#918484}.point-t[data-v-c857dae4]{top:%?-3?%;left:50%;margin-left:%?-3?%;cursor:n-resize}.point-tr[data-v-c857dae4]{top:%?-3?%;left:100%;margin-left:%?-3?%;cursor:n-resize}.point-r[data-v-c857dae4]{top:50%;left:100%;margin-top:%?-3?%;margin-left:%?-3?%;cursor:n-resize}.point-rb[data-v-c857dae4]{position:absolute;z-index:1112;top:100%;left:100%;width:%?36?%;height:%?36?%;cursor:n-resize;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);opacity:1;background-color:#e7dede}.point-b[data-v-c857dae4]{top:100%;left:50%;margin-top:%?-3?%;margin-left:%?-3?%;cursor:n-resize}.point-bl[data-v-c857dae4]{top:100%;left:0;margin-top:%?-3?%;margin-left:%?-3?%;cursor:n-resize}.point-l[data-v-c857dae4]{top:50%;left:0;margin-top:%?-3?%;margin-left:%?-3?%;cursor:n-resize}.point-lt[data-v-c857dae4]{top:0;left:0;margin-top:%?-3?%;margin-left:%?-3?%;cursor:n-resize}\r\n/* 裁剪框预览内容 */.uni-cropper-viewer[data-v-c857dae4]{position:relative;overflow:hidden;width:100%;height:100%}.uni-cropper-viewer uni-image[data-v-c857dae4]{position:absolute;z-index:2}',""]),n.exports=r},"5aa3":function(n,r,t){"use strict";t.r(r);var e=t("ec5f"),a=t.n(e);for(var i in e)"default"!==i&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},"5afa":function(n,r,t){"use strict";t.r(r);var e=t("e06a"),a=t.n(e);for(var i in e)"default"!==i&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},7826:function(n,r,t){"use strict";t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var e={gmyImgCropper:t("aac3").default},a=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",[t("gmy-img-cropper",{ref:"gmyImgCropper",attrs:{quality:1,cropperType:"ratio",ratio:2.3,fileType:"jpg",imgSrc:n.imgSrc},on:{getImg:function(r){arguments[0]=r=n.$handleEvent(r),n.getImg.apply(void 0,arguments)}}})],1)},i=[]},9678:function(n,r,t){"use strict";var e=t("0491"),a=t.n(e);a.a},aac3:function(n,r,t){"use strict";t.r(r);var e=t("af84"),a=t("5afa");for(var i in a)"default"!==i&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("9678");var o,c=t("f0c5"),p=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,"c857dae4",null,!1,e["a"],o);r["default"]=p.exports},af84:function(n,r,t){"use strict";var e;t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var a=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:n.isShow,expression:"isShow"}],staticClass:"container"},[t("v-uni-view",[t("v-uni-view",{staticClass:"cropper-content"},[n.isShowImg?t("v-uni-view",{staticClass:"uni-corpper",style:"width:"+n.cropperInitW+"px;height:"+n.cropperInitH+"px;background:#000"},[t("v-uni-view",{staticClass:"uni-corpper-content",style:"width:"+n.cropperW+"px;height:"+n.cropperH+"px;top:"+n.cropperT+"px"},[t("v-uni-image",{style:"width:"+n.cropperW+"px;height:"+n.cropperH+"px",attrs:{src:n.imageSrc}}),t("v-uni-view",{staticClass:"uni-corpper-crop-box",style:"left:"+n.cutL+"px;top:"+n.cutT+"px;right:"+n.cutR+"px;bottom:"+n.cutB+"px",on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.contentStartMove.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.contentMoveing.apply(void 0,arguments)},touchend:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.contentTouchEnd.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"uni-cropper-view-box"},[t("v-uni-view",{staticClass:"uni-cropper-dashed-h"}),t("v-uni-view",{staticClass:"uni-cropper-dashed-v"}),t("v-uni-view",{staticClass:"uni-cropper-line-t",attrs:{"data-drag":"top"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-line-r",attrs:{"data-drag":"right"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-line-b",attrs:{"data-drag":"bottom"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-line-l",attrs:{"data-drag":"left"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-t",attrs:{"data-drag":"top"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-tr",attrs:{"data-drag":"topTight"}}),t("v-uni-view",{staticClass:"uni-cropper-point point-r",attrs:{"data-drag":"right"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-rb",attrs:{"data-drag":"rightBottom"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-b",attrs:{"data-drag":"bottom"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)},touchend:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragEnd.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-bl",attrs:{"data-drag":"bottomLeft"}}),t("v-uni-view",{staticClass:"uni-cropper-point point-l",attrs:{"data-drag":"left"},on:{touchstart:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragStart.apply(void 0,arguments)},touchmove:function(r){r.stopPropagation(),arguments[0]=r=n.$handleEvent(r),n.dragMove.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"uni-cropper-point point-lt",attrs:{"data-drag":"leftTop"}})],1)],1)],1)],1):n._e()],1),t("v-uni-view",{staticClass:"cropper-config"},[t("v-uni-view",{staticClass:"button-box"},[t("v-uni-view",{on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.chooseImage.apply(void 0,arguments)}}},[n._v("重选")]),t("v-uni-view",{on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.previewImg.apply(void 0,arguments)}}},[n._v("预览")]),t("v-uni-view",{on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.finish.apply(void 0,arguments)}}},[n._v("完成")])],1)],1),t("v-uni-canvas",{style:"position:absolute;border: 2px solid red; width:"+n.imageW+"px;height:"+n.imageH+"px;top:-9999px;left:-9999px;",attrs:{"canvas-id":"myCanvas"}})],1)],1)},i=[]},c38f:function(n,r,t){"use strict";t.r(r);var e=t("7826"),a=t("5aa3");for(var i in a)"default"!==i&&function(n){t.d(r,n,(function(){return a[n]}))}(i);var o,c=t("f0c5"),p=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,"6cd01d9b",null,!1,e["a"],o);r["default"]=p.exports},e06a:function(n,r,t){"use strict";var e=t("4ea4");t("4160"),t("a9e3"),t("b64b"),t("159b"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,i,o,c,p,s,u,d,h,l,g,v=e(t("3835")),f=uni.getSystemInfoSync(),m=f.screenWidth,b=f.windowHeight+40,w=(f.pixelRatio,1),y=f.screenWidth,x={data:function(){return{imageSrc:"",isShow:!1,isShowImg:!1,cropperInitW:m,cropperInitH:b,cropperW:m,cropperH:b-100,cropperL:0,cropperT:0,transL:0,transT:0,scaleP:0,imageW:0,imageH:0,cutL:0,cutT:0,cutB:m,cutR:"100%",qualityWidth:y,innerAspectRadio:w}},props:{quality:{type:Number|String,default:1},imgSrc:{type:String,default:""},fileType:{type:String,default:"png",validator:function(n){return"png"===n||"jpg"===n}},cropperType:{type:String,default:"free",validator:function(n){return"free"===n||"fixed"===n||"ratio"===n}},ratio:{type:Number,default:1}},created:function(){this.imgSrc&&this.imageSrc.length>1&&(this.imageSrc=this.imgSrc,this.loadImage(),this.isShow=!0,this.isShowImg=!0)},methods:{setData:function(n){var r=this;Object.keys(n).forEach((function(t){r.$set(r.$data,t,n[t])}))},setImageSrc:function(n){this.imageSrc=n,this.loadImage(),this.isShow=!0,this.isShowImg=!0},chooseImage:function(){var n=this;uni.chooseImage({success:function(r){n.setData({imageSrc:r.tempFilePaths[0]}),n.loadImage(),n.isShow=!0}})},loadImage:function(){var n=this;uni.showLoading({title:"图片加载中..."}),uni.getImageInfo({src:n.imageSrc,success:function(r){var t=r.height,e=r.width;h=e/t,h<1&&(b-120)*h<m-10?(l=(b-120)*h,g=b-120):(l=m-10,g=l/h);var a=n.initCutArea(h,g,l),i=(0,v.default)(a,4),o=i[0],c=i[1],p=i[2],s=i[3];n.setData({cropperW:l,cropperH:g,cropperL:Math.ceil((m-l)/2),cropperT:Math.ceil((b-g-90)/2),cutL:p,cutT:o,cutR:s,cutB:c,imageW:l,imageH:g,scaleP:l/m,qualityWidth:y,innerAspectRadio:h}),n.setData({isShowImg:!0}),uni.hideLoading()}})},initCutArea:function(n,r,t){var e=this,a=0,i=0,o=0,c=0;if("fixed"==e.cropperType&&(n<1?(a=(r-t)/2,i=(r-t)/2):(o=(t-r)/2,c=(t-r)/2)),"ratio"==e.cropperType){var p=+e.ratio;n<1?t/p>r?(a=i=0,o=c=(t-r*p)/2):(c=o=0,a=i=(r-t/p)/2):r*p>t?(o=c=0,i=a=(r-t/p)/2):(a=i=0,o=c=(t-r*p)/2)}return[a,i,o,c]},contentStartMove:function(n){a=n.touches[0].pageX,i=n.touches[0].pageY},contentMoveing:function(n){var r=(a-n.touches[0].pageX)*w,t=(i-n.touches[0].pageY)*w;r>0?this.cutL-r<0&&(r=this.cutL):this.cutR+r<0&&(r=-this.cutR),t>0?this.cutT-t<0&&(t=this.cutT):this.cutB+t<0&&(t=-this.cutB),this.setData({cutL:this.cutL-r,cutT:this.cutT-t,cutR:this.cutR+r,cutB:this.cutB+t}),a=n.touches[0].pageX,i=n.touches[0].pageY},contentTouchEnd:function(){},previewImg:function(){var n=this;try{var r=this;uni.showLoading({title:"图片生成中..."});var t=uni.createCanvasContext("myCanvas",r);t.drawImage(r.imageSrc,0,0,l,g),t.draw(!0,(function(){var t=(r.cropperW-r.cutL-r.cutR)/r.cropperW*l,e=(r.cropperH-r.cutT-r.cutB)/r.cropperH*g,a=r.cutL/r.cropperW*l,i=r.cutT/r.cropperH*g;uni.canvasToTempFilePath({x:a,y:i,width:t,height:e,quality:+n.quality,fileType:n.fileType,canvasId:"myCanvas",success:function(n){uni.hideLoading(),uni.previewImage({current:"",urls:[n.tempFilePath]})},fail:function(n){uni.hideLoading(),uni.showToast({title:"图片截取失败！",icon:"none"})}},r)}))}catch(e){}},finish:function(){var n=this,r=this;uni.showLoading({title:"图片生成中..."});var t=uni.createCanvasContext("myCanvas",r);t.drawImage(r.imageSrc,0,0,l,g),t.draw(!0,(function(){var t=(r.cropperW-r.cutL-r.cutR)/r.cropperW*l,e=(r.cropperH-r.cutT-r.cutB)/r.cropperH*g,a=r.cutL/r.cropperW*l,i=r.cutT/r.cropperH*g;uni.canvasToTempFilePath({x:a,y:i,width:t,height:e,quality:+n.quality,fileType:n.fileType,canvasId:"myCanvas",success:function(n){uni.hideLoading(),r.$emit("getImg",n.tempFilePath),r.isShow=!1},fail:function(n){uni.hideLoading(),uni.showToast({title:"图片截取失败！",icon:"none"})}},r)}))},dragStart:function(n){o=n.touches[0].pageX,c=n.touches[0].pageY,p=this.cutL,u=this.cutR,d=this.cutB,s=this.cutT},dragMove:function(n){this[this.cropperType+"Drag"](n)},fixedDrag:function(n){var r=this,t=n.target.dataset.drag;switch(t){case"rightBottom":var e=(o-n.touches[0].pageX)*w;u+e<0&&(e=-u);var a=d+e,i=u+e;if(0==r.cutB&&a<0)return;if(0==r.cutR&&i<0)return;(r.cutB>0||0==d)&&this.setData({cutB:a<0?0:a,cutR:i});break;default:break}},ratioDrag:function(n){var r=this,t=n.target.dataset.drag;switch(t){case"rightBottom":var e=(o-n.touches[0].pageX)*w;u+e<0&&(e=-u);var a=d+e/r.ratio,i=u+e;if(0==r.cutB&&a<0)return;if(0==r.cutR&&i<0)return;(r.cutB>0||0==d)&&this.setData({cutB:a<0?0:a,cutR:i});break;default:break}},freeDrag:function(n){var r=n.target.dataset.drag;switch(r){case"right":var t=(o-n.touches[0].pageX)*w;u+t<0&&(t=-u),this.setData({cutR:u+t});break;case"left":t=(o-n.touches[0].pageX)*w;p-t<0&&(t=p),p-t>this.cropperW-this.cutR&&(t=p-(this.cropperW-this.cutR)),this.setData({cutL:p-t});break;case"top":t=(c-n.touches[0].pageY)*w;s-t<0&&(t=s),s-t>this.cropperH-this.cutB&&(t=s-(this.cropperH-this.cutB)),this.setData({cutT:s-t});break;case"bottom":t=(c-n.touches[0].pageY)*w;d+t<0&&(t=-d),this.setData({cutB:d+t});break;case"rightBottom":var e=(o-n.touches[0].pageX)*w,a=(c-n.touches[0].pageY)*w;d+a<0&&(a=-d),u+e<0&&(e=-u);var i=d+a,h=u+e;this.setData({cutB:i,cutR:h});break;default:break}}}};r.default=x},ec5f:function(n,r,t){"use strict";var e=t("4ea4");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e(t("aac3")),i={components:{gmyImgCropper:a.default},data:function(){return{imgSrc:""}},onLoad:function(n){this.imgSrc=n.tempFilePath,this.$refs.gmyImgCropper.setImageSrc(this.imgSrc),this.$refs.gmyImgCropper.loadImage()},methods:{getImg:function(n){console.log(n);var r=this;uni.navigateBack({delta:1,success:function(t){r.imgCropperShow=!1,uni.$emit("crop_img_success",{path:n})}})}}};r.default=i}}]);